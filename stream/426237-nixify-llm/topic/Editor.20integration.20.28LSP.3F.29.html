<html>
<head><meta charset="utf-8"><title>Editor integration (LSP?) · nixify-llm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://chat.nixos.asia/stream/426237-nixify-llm/index.html">nixify-llm</a></h2>
<h3>Topic: <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html">Editor integration (LSP?)</a></h3>

<hr>

<base href="https://nixos.zulipchat.com">

<head><link href="http://chat.nixos.asia/style.css" rel="stylesheet"></head>

<a name="423152528"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423152528" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423152528">(Feb 24 2024 at 09:11)</a>:</h4>
<p><a href="https://github.com/djandries/llmvm/blob/master/frontends%2Fcodeassist%2FREADME.md">https://github.com/djandries/llmvm/blob/master/frontends%2Fcodeassist%2FREADME.md</a></p>



<a name="423152568"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423152568" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423152568">(Feb 24 2024 at 09:11)</a>:</h4>
<p>What will be the way to go?</p>
<p>(Under the umbrella premis of defying proprietary standards and ecosystems)</p>



<a name="423152631"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423152631" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423152631">(Feb 24 2024 at 09:12)</a>:</h4>
<p><span class="user-mention" data-user-id="669081">@Shivaraj B H</span> ^^ helix-bound, as well.</p>



<a name="423154265"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423154265" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423154265">(Feb 24 2024 at 09:37)</a>:</h4>
<p><a href="https://github.com/DJAndries/llmvm/issues/7">https://github.com/DJAndries/llmvm/issues/7</a></p>



<a name="423155972"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423155972" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423155972">(Feb 24 2024 at 10:03)</a>:</h4>
<p><a href="https://github.com/DJAndries/llmvm/issues/8">https://github.com/DJAndries/llmvm/issues/8</a></p>



<a name="423156126"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423156126" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423156126">(Feb 24 2024 at 10:04)</a>:</h4>
<p>For the true elite who have long left CLI-based tools behind and embraced the virtues of the GUI, there is (at least for VSCode) for interacting with locally hosted A.I. models:</p>
<p><a href="https://github.com/continuedev/continue">https://github.com/continuedev/continue</a><br>
<a href="https://github.com/ex3ndr/llama-coder">https://github.com/ex3ndr/llama-coder</a></p>
<p>I have been playing with these a bit. Not sure what is out there for Neovim, yet. Probably some things will be found.</p>



<a name="423156258"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423156258" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423156258">(Feb 24 2024 at 10:05)</a>:</h4>
<p>llmvm is a good approach, indeed for text based editors, the way how it injects itself into the LSP protocol.</p>



<a name="423156384"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423156384" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423156384">(Feb 24 2024 at 10:06)</a>:</h4>
<p>(or even for VSCode)</p>



<a name="423156542"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423156542" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423156542">(Feb 24 2024 at 10:08)</a>:</h4>
<p>It can run models against:</p>
<ul>
<li>local backend (run by llvm.cpp via lvm rust bindings)</li>
<li>simply a remote api</li>
</ul>
<p>It's actually nice that every layer of the stack can be provided remotely, even the core component to the frontend.</p>



<a name="423156674"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423156674" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423156674">(Feb 24 2024 at 10:09)</a>:</h4>
<p>I mean there is stuff out there like</p>
<p><a href="https://github.com/nomnivore/ollama.nvim">https://github.com/nomnivore/ollama.nvim</a><br>
<a href="https://github.com/jpmcb/nvim-llama">https://github.com/jpmcb/nvim-llama</a></p>
<p>So people are playing with this obviously, I am just not sure what will stick yet.</p>



<a name="423156730"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423156730" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423156730">(Feb 24 2024 at 10:09)</a>:</h4>
<p>Llmvm Core</p>
<blockquote>
<p>manages state related to text generation, such as:<br>
Model presets<br>
Prompt templates<br>
Message threads<br>
Projects/workspaces</p>
</blockquote>
<p>That's pretty neat and a sound design.</p>



<a name="423156993"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423156993" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423156993">(Feb 24 2024 at 10:11)</a>:</h4>
<p>I guess running against locally hosted remote API is what I would go for, most likely either ollama API or OpenAI compatible, which more and more are implementing. </p>
<p>Yes, LLVM core is looking promising. </p>
<p>If you might then integrate something like khoj which can use entire GitHub repos as context apparently, it might get even more interesting</p>



<a name="423157088"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423157088" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423157088">(Feb 24 2024 at 10:12)</a>:</h4>
<p>I wonder what would happen if we self-hosted khoj and fed it nixpkgs as a repo.</p>



<a name="423157146"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423157146" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423157146">(Feb 24 2024 at 10:12)</a>:</h4>
<p>I'm always a bit wary of the foundations of auch productized "solutions", tbh.</p>
<p>"Solutions to what?"</p>
<p>In LLMVM i was able to exactly identify what I'd be missing in about an hour of research:</p>
<p>I think, this is what we want:</p>
<ul>
<li><a href="https://github.com/DJAndries/llmvm/issues/7">https://github.com/DJAndries/llmvm/issues/7</a></li>
<li><a href="https://github.com/DJAndries/llmvm/issues/8">https://github.com/DJAndries/llmvm/issues/8</a></li>
</ul>



<a name="423157310"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423157310" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423157310">(Feb 24 2024 at 10:14)</a>:</h4>
<p>Issue 8 requests project scope context.</p>
<p>But for the LSP-based codeassist feature, too much context might actually be harmful for the result quality.</p>



<a name="423157365"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423157365" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423157365">(Feb 24 2024 at 10:14)</a>:</h4>
<p>Of course, if your language is non typed, you're really a bit out of luck. But that's true anyways.</p>



<a name="423157577"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423157577" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423157577">(Feb 24 2024 at 10:16)</a>:</h4>
<p>Let's see if you get a discussion on your issues.</p>



<a name="423157902"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423157902" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423157902">(Feb 24 2024 at 10:22)</a>:</h4>
<p>Locally hosted remote api:</p>
<p>It appears that from the web of context around specifically this resource <a href="https://github.com/rustformers/llm">https://github.com/rustformers/llm</a></p>
<p>That llvm.cpp is the current state of the art model runtime (over ONNX, which is a bit more slow moving and has more industry support). Nitro is built on it.</p>
<p>Specifically the GGUF model format appears to be regarded as promising by the domain experts in the same web of context.</p>
<p>The <code>llm</code> create used by <code>llmvm</code> is lagging a bit on support for the latest <code>llvm.cpp</code> developments, which is why separately hosting with nitro and using the offloading backend (e.g. via a OpenAI compatible API) sounds like a good escape hatch.</p>
<p>But it's nice that <code>llmvm</code> <em>could</em> also manage your model runtime seemlessly.</p>



<a name="423159171"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159171" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159171">(Feb 24 2024 at 10:40)</a>:</h4>
<blockquote>
<p>But for the LSP-based codeassist feature, too much context might actually be harmful for the result quality.</p>
</blockquote>
<p>So khoj has it's own client. And they have a GitHub integration. I am not entirely firm yet on the theoretical basis for the technique behind it, which is Retrieval Augmented Generation for LLMs. But basically it runs a Postgres-turned-VectorDB instance to store context if I see this correctly.</p>



<a name="423159284"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159284" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159284">(Feb 24 2024 at 10:42)</a>:</h4>
<p>Seems like it, yes. And thanks! I just wondered why the heck postgres?</p>
<p>Is that more performant? Or probably it does a transformation ahead of time?</p>



<a name="423159442"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159442" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159442">(Feb 24 2024 at 10:45)</a>:</h4>
<div class="message_inline_image"><a href="https://github.com/khoj-ai/khoj/blob/master/documentation%2Fassets%2Fimg%2Fkhoj_architecture.png"><img src="https://uploads.zulipusercontent.net/129a63cfeafd55f0a46b4c580cae94467f60443b/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6b686f6a2d61692f6b686f6a2f6d61737465722f646f63756d656e746174696f6e253246617373657473253246696d672532466b686f6a5f6172636869746563747572652e706e67"></a></div>



<a name="423159546"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159546" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159546">(Feb 24 2024 at 10:47)</a>:</h4>
<p>Yeah that illustration is nice. If need to guesstimate this, but I'd say the corpus embeddings need to be stored somewhere.</p>



<a name="423159550"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159550" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159550">(Feb 24 2024 at 10:47)</a>:</h4>
<p>What is corpus embedding?</p>
<blockquote>
<p>The corpus can also be a custom embedding layer, which is specifically designed for the use case when other pre-trained corpora cannot supply sufficient data.</p>
</blockquote>



<a name="423159667"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159667" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159667">(Feb 24 2024 at 10:49)</a>:</h4>
<p>yes, in order to explain exactly what that is, I'd have to read the papers detailing the technique. Again, guesstimating this, it is some linear-algebra based compression of the information in your text corpus (notes, GitHub repo) , which then can be use to enhance the LLM output to refer to information peculiar to your corpus of text.</p>



<a name="423159715"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159715" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159715">(Feb 24 2024 at 10:50)</a>:</h4>
<p>Since we're not dealing with images and ledgers in a Code Editor scenario, this type of transformation and corpus embedding is probably less relevant.</p>
<p>But for <strong>retreival/search</strong> it seems key.</p>



<a name="423159773"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159773" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159773">(Feb 24 2024 at 10:51)</a>:</h4>
<p>I mean Code is text. Text is run through a tokenizer, and embeddings are vector-space-based linear algebra reprsentations of the tokenization of your text (more or less). But that is true for LLMs in general.</p>



<a name="423159774"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159774" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159774">(Feb 24 2024 at 10:51)</a>:</h4>
<p>Preliminary <strong>Conclusion</strong>:</p>
<ul>
<li>For search: Khoj</li>
<li>For LSP: llmvm</li>
</ul>



<a name="423159826"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159826" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159826">(Feb 24 2024 at 10:52)</a>:</h4>
<p>well I am not so sure you couldn't somehow fuse these</p>



<a name="423159896"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159896" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159896">(Feb 24 2024 at 10:53)</a>:</h4>
<p>but as it stand right now, you are right</p>



<a name="423159899"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159899" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159899">(Feb 24 2024 at 10:53)</a>:</h4>
<p>It doesn't make really sense in a near scope: for retreival you already have LSPs and rich semantic code identifiers, such as types, etc.</p>
<p>Of course that disregards some unknown potential that might just reveal itself after it is there.</p>



<a name="423159993"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423159993" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423159993">(Feb 24 2024 at 10:54)</a>:</h4>
<p>But Khoj can run with the same model  backend as llmvm, for example, so at that level, they can share a stack (or a credit card). :-)</p>



<a name="423160022"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423160022" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423160022">(Feb 24 2024 at 10:55)</a>:</h4>
<p>I mean what I have in mind here is: use these corpus embeddings of a GitHub repo or a whole set of GitHub repos (think: nixpkgs + all commuity repos of sufficient quality; or alternatively, all the repos in the cargo database with a certain number of stars for rust) with an existing code-optimized LLM. Is something you'd have to try and see what it does.</p>



<a name="423160120"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423160120" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423160120">(Feb 24 2024 at 10:57)</a>:</h4>
<p>How do you get the corpus embeddings injected into the prompt? Because maybe that's not too far off as a data source to inject from khoj for lvmvm.</p>



<a name="423160124"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423160124" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423160124">(Feb 24 2024 at 10:57)</a>:</h4>
<p>But I have no idea if this even makes any sense. But since nixpkgs is a monorepo it might (ironically) be an easy thing to just try and feed it to khoj. And then run khoj with codellama or deepseek-coder and see what comes out.</p>



<a name="423160158"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423160158" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423160158">(Feb 24 2024 at 10:58)</a>:</h4>
<blockquote>
<p>How do you get the corpus embeddings injected into the prompt? </p>
</blockquote>
<p>I mean I assume that is what khoj does when you query it?</p>
<p>And the for getting the repos into khoj they have this:</p>
<p><a href="https://docs.khoj.dev/online-data-sources/github_integration/">https://docs.khoj.dev/online-data-sources/github_integration/</a></p>



<a name="423160719"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423160719" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423160719">(Feb 24 2024 at 11:05)</a>:</h4>
<p>Noe it seems like you might have to trick or configure it explicitly it to accept the file containing the actual code as the plaintext stuff you want to create context embeddings for. It seems to be somewhat against the design idea of khoj to do that. However that doesn't necessarily mean it wouldn't work. But it might take some time it seems. At least they say it does for large repos.</p>



<a name="423160858"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423160858" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423160858">(Feb 24 2024 at 11:06)</a>:</h4>
<p>Khoj just could give the preprocessimg to the toolchain, not the other way round.</p>



<a name="423161060"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423161060" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423161060">(Feb 24 2024 at 11:07)</a>:</h4>
<p>that's all things you'd have to experimentally try out which works and which doesn't. I mean I might try and set something up at some point.</p>



<a name="423161065"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423161065" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423161065">(Feb 24 2024 at 11:07)</a>:</h4>
<p>Btw, Eka Types is what I see as our highly rated comtext embedding sources for the Eka ecosystem. Since typed and schemaed they should be of extremely high quality, already.</p>



<a name="423161851"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423161851" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423161851">(Feb 24 2024 at 11:20)</a>:</h4>
<p>I mean the funny things about these LLMs is that they do stuff that looks intelligent, but nobody really knows what is going on in there in detail. It might just be a fancy non-linear lossy compression technique like zip files that you can query in natural language (or weird optimized totally unnatural and unexpected ways). So if types add information and you fine-tune a model of a typed variety of an otherwise untyped language it might add something. But until you do you don't know. In the end it's all just text that is being vectorized. (Or context for that matter, which works a bit differently, but don't ask me for the details yet. I will probably read some at some point <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span> )</p>



<a name="423162089"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423162089" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423162089">(Feb 24 2024 at 11:23)</a>:</h4>
<p><a href="https://github.com/khoj-ai/khoj/blob/master/src%2Fkhoj%2Fprocessor%2Fcontent%2Fmarkdown%2Fmarkdown_to_entries.py#L79-L96">https://github.com/khoj-ai/khoj/blob/master/src%2Fkhoj%2Fprocessor%2Fcontent%2Fmarkdown%2Fmarkdown_to_entries.py#L79-L96</a></p>
<p>This is how an entry is "compiled" from markdown. Nothing fancy, and definitly of very limited value compared to how native LSP can generate entries.</p>
<p>So in sum: khoj isn't really useful for the editor case, as far as I can see.</p>



<a name="423163061"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423163061" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423163061">(Feb 24 2024 at 11:38)</a>:</h4>
<blockquote>
<p>So in sum: khoj isn't really useful for the editor case, as far as I can see.</p>
</blockquote>
<p>That is possible, yes. I will try it nonetheless and see what it does. Maybe it is also just a nice open source thing to allow users ask questions verbally about potential documentation and improve their learning experience.</p>
<blockquote>
<p>definitly of very limited value compared to how native LSP can generate entries.</p>
</blockquote>
<p>I am not sure this is the right standard of comparison. Because the idea is to enhance the query of some LLM.</p>



<a name="423163290"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423163290" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423163290">(Feb 24 2024 at 11:43)</a>:</h4>
<blockquote>
<p>Nothing fancy</p>
</blockquote>
<p>I guess from a software development perspective LLMs are nothing fancy either. It's just a file with pre-trained weights and a program using the file, doing some input-output. This is why people doing symbolic A.I. for decades were so upset when they found that stupid deep-learning models (like transformer-based LLMs) were magnitudes better at many tasks.</p>



<a name="423164186"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423164186" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423164186">(Feb 24 2024 at 11:55)</a>:</h4>
<p>Yes, and my argument actually was that while one enhances the LLM output about types and actual code samples, throwing in an occasional markdown snippet into the context might not necessarily produce better results, because types are already as concise as it can get.</p>
<p>But not actually sure, either: maybe the LLM can benefit from accompanying prose, as well.</p>



<a name="423164484"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423164484" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Arnold <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423164484">(Feb 24 2024 at 12:00)</a>:</h4>
<p>In all of this: do input token length on the system prompt ("context") count costs in typical pricing models?</p>



<a name="423166464"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/426237-nixify-llm/topic/Editor%20integration%20%28LSP%3F%29/near/423166464" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="http://chat.nixos.asia/stream/426237-nixify-llm/topic/Editor.20integration.20.28LSP.3F.29.html#423166464">(Feb 24 2024 at 12:35)</a>:</h4>
<p>afaik that depends on the company. Here is OpenAI, they calculate both input and output prices:</p>
<p><a href="https://openai.com/pricing">https://openai.com/pricing</a></p>



<hr><p>Last updated: Jun 27 2024 at 18:45 UTC</p>
</html>