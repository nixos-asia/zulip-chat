<html>
<head><meta charset="utf-8"><title>1Password TouchID auth for git, ssh, etc. · nix · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://chat.nixos.asia/stream/413950-nix/index.html">nix</a></h2>
<h3>Topic: <a href="http://chat.nixos.asia/stream/413950-nix/topic/1Password.20TouchID.20auth.20for.20git.2C.20ssh.2C.20etc.2E.html">1Password TouchID auth for git, ssh, etc.</a></h3>

<hr>

<base href="https://nixos.zulipchat.com">

<head><link href="http://chat.nixos.asia/style.css" rel="stylesheet"></head>

<a name="421292563"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/413950-nix/topic/1Password%20TouchID%20auth%20for%20git%2C%20ssh%2C%20etc./near/421292563" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Srid <a href="http://chat.nixos.asia/stream/413950-nix/topic/1Password.20TouchID.20auth.20for.20git.2C.20ssh.2C.20etc.2E.html#421292563">(Feb 13 2024 at 17:34)</a>:</h4>
<p>You can configure home-manager ssh module to use local 1Password SSH agent socket, as well as forward this agent to external machines so that SSH-based operations (like <code>git pull</code>) on that external machine will use the local 1Password keys via TouchID!</p>
<p>This obviates from having to keep private ssh keys from external machines. Everything is managed locally on mac by 1Password.</p>
<p><a href="https://github.com/srid/nixos-config/blob/master/home/ssh.nix">https://github.com/srid/nixos-config/blob/master/home/ssh.nix</a></p>
<p><a href="/user_uploads/60244/7KEjQLtHsuxewWrzfyPcKWmJ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/60244/7KEjQLtHsuxewWrzfyPcKWmJ/image.png" title="image.png"><img src="/user_uploads/60244/7KEjQLtHsuxewWrzfyPcKWmJ/image.png"></a></div>



<a name="421297075"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/413950-nix/topic/1Password%20TouchID%20auth%20for%20git%2C%20ssh%2C%20etc./near/421297075" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim DeHerrera <a href="http://chat.nixos.asia/stream/413950-nix/topic/1Password.20TouchID.20auth.20for.20git.2C.20ssh.2C.20etc.2E.html#421297075">(Feb 13 2024 at 18:01)</a>:</h4>
<p>I can already use the ssh key stored on my yubikey from remote hosts by passed the <code>ssh -A</code> option when connecting, which then forwards the key to the agent on the host I'm connecting to. What I'm lacking is passing through things like my GPG key or configured OTP keys for passwordless sudo, but only when yubi is available</p>



<a name="421297366"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/413950-nix/topic/1Password%20TouchID%20auth%20for%20git%2C%20ssh%2C%20etc./near/421297366" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Srid <a href="http://chat.nixos.asia/stream/413950-nix/topic/1Password.20TouchID.20auth.20for.20git.2C.20ssh.2C.20etc.2E.html#421297366">(Feb 13 2024 at 18:02)</a>:</h4>
<p>I want the same thing (sudo, etc.) but via 1Password.</p>



<a name="421297452"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/413950-nix/topic/1Password%20TouchID%20auth%20for%20git%2C%20ssh%2C%20etc./near/421297452" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Srid <a href="http://chat.nixos.asia/stream/413950-nix/topic/1Password.20TouchID.20auth.20for.20git.2C.20ssh.2C.20etc.2E.html#421297452">(Feb 13 2024 at 18:03)</a>:</h4>
<p><a href="https://1password.community/discussion/128353/sudo-support">https://1password.community/discussion/128353/sudo-support</a></p>



<a name="421347878"></a>
<h4><a href="https://nixos.zulipchat.com#narrow/stream/413950-nix/topic/1Password%20TouchID%20auth%20for%20git%2C%20ssh%2C%20etc./near/421347878" class="zl"><img src="http://chat.nixos.asia/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim DeHerrera <a href="http://chat.nixos.asia/stream/413950-nix/topic/1Password.20TouchID.20auth.20for.20git.2C.20ssh.2C.20etc.2E.html#421347878">(Feb 14 2024 at 00:21)</a>:</h4>
<p>Actually I guess there is a protocol called usbip and someone wrote a perl script for something like what I'm after:<br>
<a href="https://github.com/turistu/usbip-ssh">https://github.com/turistu/usbip-ssh</a></p>
<p>However this script somewhat annoyingly is the reverse of what I'd like. It gives a client a way to expose a servers USB devices to the client. What I'd like is a way to forward the clients to the server so I can authenticate with the yubikey remotely.</p>
<p>I'm sure the script could be modified to do what I want though, I might have a crack at it later.</p>



<hr><p>Last updated: Jun 27 2024 at 18:45 UTC</p>
</html>