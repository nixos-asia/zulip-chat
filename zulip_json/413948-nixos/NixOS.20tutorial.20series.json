[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"671068\">Zapier</span> <a href=\"#narrow/stream/415266-social-media/topic/r.2Fnixos/near/406907033\">said</a>:</p>\n<blockquote>\n<h2>flake-parts system config + hm</h2>\n<p>Date: 2023-12-08T07:33:48+00:00<br>\nLink: <a href=\"https://old.reddit.com/r/NixOS/comments/18dhmb5/flakeparts_system_config_hm/\">https://old.reddit.com/r/NixOS/comments/18dhmb5/flakeparts_system_config_hm/</a></p>\n<blockquote>\n<p>Is there a step-by-step tutorial on how to use flake-parts for system configuration (ideally with home-manager)? The documentation is too abstract for me.</p>\n<p>The published repos on github of people using flake-parts all look very different, and I cannot comprehend why they do things different.</p>\n<p>submitted by   /u/zeec123</p>\n<p>[link]   [comments]<br>\n</p>\n</blockquote>\n</blockquote>",
        "id": 406935695,
        "sender_full_name": "Srid",
        "timestamp": 1702129024
    },
    {
        "content": "<p>Just a skeleton for now: <a href=\"https://nixos.asia/en/nixos\">https://nixos.asia/en/nixos</a></p>\n<p><a href=\"/user_uploads/60244/eUWw4sp9KYG1omblUfjaW_3G/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/60244/eUWw4sp9KYG1omblUfjaW_3G/image.png\" title=\"image.png\"><img src=\"/user_uploads/60244/eUWw4sp9KYG1omblUfjaW_3G/image.png\"></a></div>",
        "id": 406962653,
        "sender_full_name": "Srid",
        "timestamp": 1702147614
    },
    {
        "content": "<p>First attempt: <a href=\"https://github.com/nixos-asia/website/pull/12\">https://github.com/nixos-asia/website/pull/12</a></p>",
        "id": 406988850,
        "sender_full_name": "Srid",
        "timestamp": 1702169045
    },
    {
        "content": "<p>Feedback on this ^ welcome. Planning to publish tomorrow.</p>",
        "id": 406990798,
        "sender_full_name": "Srid",
        "timestamp": 1702170192
    },
    {
        "content": "<p>First tutorial <span aria-label=\"right\" class=\"emoji emoji-27a1\" role=\"img\" title=\"right\">:right:</span> <a href=\"https://nixos.asia/en/tutorial/nixos-install\">https://nixos.asia/en/tutorial/nixos-install</a></p>",
        "id": 407240328,
        "sender_full_name": "Srid",
        "timestamp": 1702301384
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"669081\">@Shivaraj B H</span> </p>\n<p>I propose that we repurpose <a href=\"https://github.com/nixos-asia/website/pull/8\">this blog post</a> into a general tutorial that complements our <a href=\"https://nixos.asia/en/tutorial/nixos-install\">first one</a>.</p>\n<ul>\n<li>It will no longer need to be associated with remote-development repo</li>\n<li>It fits in the larger scheme of producing <a href=\"https://lobste.rs/s/sd9kqb/install_nixos_with_flake_configuration#c_i3ajj6\">a learning mind-map / flow-chat</a>.<ul>\n<li>Specifically, there are two 'doorways' to installing NixOS: a) the usual approach via graphical installer (1st tutorial), b) a more automated approach (this blog-post-repurposed-as-tutorial)</li>\n</ul>\n</li>\n</ul>\n<p>To give an idea of the 'larger scheme':</p>\n<p><a href=\"/user_uploads/60244/ZuJNAwZwrO36_V0o9Ero3zkl/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/60244/ZuJNAwZwrO36_V0o9Ero3zkl/image.png\" title=\"image.png\"><img src=\"/user_uploads/60244/ZuJNAwZwrO36_V0o9Ero3zkl/image.png\"></a></div>",
        "id": 407491259,
        "sender_full_name": "Srid",
        "timestamp": 1702391957
    },
    {
        "content": "<p>I think likewise, I was having second thoughts about publishing the above mentioned post primarily because this minimal configuration was way too specific for the device we are using.</p>",
        "id": 407493092,
        "sender_full_name": "Shivaraj B H",
        "timestamp": 1702392421
    },
    {
        "content": "<p>There is actually a third way of installing as well that can compliment the first tutorial you had written: Disko to partition your disk and Nixos-install —flake to install the OS</p>",
        "id": 407493409,
        "sender_full_name": "Shivaraj B H",
        "timestamp": 1702392490
    },
    {
        "content": "<p>Let's do it. You can rewrite it such that it achieves the same goal of first tutorial (nixos deployed with flakes enabled and config in git), but nearly automated.</p>\n<p>Yea, I assume we would be using disko for tutorial 2?</p>",
        "id": 407493518,
        "sender_full_name": "Srid",
        "timestamp": 1702392516
    },
    {
        "content": "<p>Also, screenshots are plenty useful. I liberally take screenshots and put them in Google photos. I think I took like 15 screenshots for first post, and ended up using 2 or 3 of them.</p>",
        "id": 407493640,
        "sender_full_name": "Srid",
        "timestamp": 1702392545
    },
    {
        "content": "<p>Yes we will be using disko combined with nixos-anywhere but there can also be a scenario where nixos-anywhere is not an option, like the situation I am facing now (no wired Ethernet), what if I still want to maintain my partitioning scheme in nix</p>",
        "id": 407494034,
        "sender_full_name": "Shivaraj B H",
        "timestamp": 1702392642
    },
    {
        "content": "<p>I tried this out as an experiment, it does work, I will do it again and take screenshots while I am at it</p>",
        "id": 407494272,
        "sender_full_name": "Shivaraj B H",
        "timestamp": 1702392708
    },
    {
        "content": "<p>This would be manual (not graphical) install + disko + <code>nixos-install --flake</code>? Yes, a tutorial on that would be great as well!</p>",
        "id": 407495351,
        "sender_full_name": "Srid",
        "timestamp": 1702392966
    },
    {
        "content": "<p>Let's do that one next, actually. nixos-anywhere can come latter if necessary</p>",
        "id": 407495417,
        "sender_full_name": "Srid",
        "timestamp": 1702392986
    },
    {
        "content": "<p>Then, we can say: \"here are 3 ways to install NixOS\" - each progressively more automated.</p>",
        "id": 407495565,
        "sender_full_name": "Srid",
        "timestamp": 1702393024
    },
    {
        "content": "<blockquote>\n<p>I will do it again and take screenshots while I am at it</p>\n</blockquote>\n<p>Try it on VM, better for screenshots. I used Parallels (could be VirtualBox) running aarch64-linux.</p>",
        "id": 407495692,
        "sender_full_name": "Srid",
        "timestamp": 1702393057
    },
    {
        "content": "<p>Great, sounds good</p>",
        "id": 407497032,
        "sender_full_name": "Shivaraj B H",
        "timestamp": 1702393339
    },
    {
        "content": "<p>Source for some ideas</p>\n<blockquote>\n<p>Note what George says at some point: “I am interested in being able to use Nix to quickly deploy cloud instances.”</p>\n<p>So wouldn’t it be great if we had documentation for that use case?</p>\n</blockquote>\n<p>--<a href=\"https://discourse.nixos.org/t/george-hotz-checking-out-nix-for-the-first-time/36838/8\">APCodes</a> (who is looking to join their documentation team)</p>\n<p>(Not recommending that we read the rest of the thread which appears to be idle debate that goes nowhere)</p>",
        "id": 408234862,
        "sender_full_name": "Srid",
        "timestamp": 1702664235
    },
    {
        "content": "<p>I was considering to explore <a href=\"https://github.com/nixos/nixos-hardware\">https://github.com/nixos/nixos-hardware</a> for the final automated tutorial of this series</p>",
        "id": 409134482,
        "sender_full_name": "Shivaraj B H",
        "timestamp": 1703066287
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"667408\">Srid</span> <a href=\"#narrow/stream/413948-nixos/topic/NixOS.20tutorial.20series/near/407240328\">said</a>:</p>\n<blockquote>\n<p>First tutorial <span aria-label=\"right\" class=\"emoji emoji-27a1\" role=\"img\" title=\"right\">:right:</span> <a href=\"https://nixos.asia/en/tutorial/nixos-install\">https://nixos.asia/en/tutorial/nixos-install</a></p>\n</blockquote>\n<p>Second tutorial using <code>disko</code>, written by <span class=\"user-mention\" data-user-id=\"669081\">@Shivaraj B H</span> <span aria-label=\"right\" class=\"emoji emoji-27a1\" role=\"img\" title=\"right\">:right:</span> <a href=\"https://nixos.asia/en/nixos-install-disko\">https://nixos.asia/en/nixos-install-disko</a></p>",
        "id": 422403382,
        "sender_full_name": "Srid",
        "timestamp": 1708430842
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"669081\">@Shivaraj B H</span> I just tried nixos-anywhere to install a flake on a VM.</p>\n<p>I couldn't find a rescue image for arm linux, so I just booted into the NixOS installer. And then setup its root user for ssh'ing:</p>\n<div class=\"codehilite\"><pre><span></span><code># from installer booted machine, set a root password\nsudo passwd root\n\n# from macos\nssh-copy-id -o PreferredAuthentications=password  root@10.211.55.13\n\n# then install the flake\nnix run github:nix-community/nixos-anywhere -- --build-on-remote --flake .#here root@10.211.55.13\n</code></pre></div>\n<p>Since the core 'steps' are small, I suppose a large part of our 3rd tutorial should focus on getting it working right when deploying from macOS or Linux. I also noticed that when the configuration included packages like nixvim, nixos-anywhere fails to remotely build it.</p>",
        "id": 422506285,
        "sender_full_name": "Srid",
        "timestamp": 1708465347
    },
    {
        "content": "<p>What does it fail with while trying to build packages like nixvim?</p>",
        "id": 422553055,
        "sender_full_name": "Shivaraj B H",
        "timestamp": 1708496720
    },
    {
        "content": "<p>It was more along the lines of,</p>\n<div class=\"codehilite\"><pre><span></span><code>a &#39;aarch64-linux&#39; with features {} is required to build &#39;/nix/store/ziz2sfr9h5w1sss2w2bzhjf4vl2g314g-source.drv&#39;, but I am a &#39;aarch64-darwin&#39; with features {benchmark, big-parallel, kvm, nixos-test}\n</code></pre></div>",
        "id": 422591584,
        "sender_full_name": "Srid",
        "timestamp": 1708513139
    },
    {
        "content": "<blockquote>\n<p>Since the core 'steps' are small, I suppose a large part of our 3rd tutorial should focus on getting it working right when deploying from macOS or Linux. </p>\n</blockquote>\n<p>And it may also include <a href=\"https://github.com/juspay/nix-dev-home\">nix-dev-home</a> automatically? Then we can point Linux users in our company directly to this tutorial.</p>",
        "id": 422615323,
        "sender_full_name": "Srid",
        "timestamp": 1708521473
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"667408\">Srid</span> <a href=\"#narrow/stream/413948-nixos/topic/NixOS.20tutorial.20series/near/422591584\">said</a>:</p>\n<blockquote>\n<p>It was more along the lines of,</p>\n<p><div class=\"codehilite\"><pre><span></span><code>a &#39;aarch64-linux&#39; with features {} is required to build &#39;/nix/store/ziz2sfr9h5w1sss2w2bzhjf4vl2g314g-source.drv&#39;, but I am a &#39;aarch64-darwin&#39; with features {benchmark, big-parallel, kvm, nixos-test}\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Related: <a href=\"https://github.com/zhaofengli/colmena/issues/178\">https://github.com/zhaofengli/colmena/issues/178</a></p>",
        "id": 422695122,
        "sender_full_name": "Srid",
        "timestamp": 1708545210
    },
    {
        "content": "<h4><code>disko-install</code></h4>\n<p><a href=\"https://github.com/nix-community/disko/pull/548\">https://github.com/nix-community/disko/pull/548</a></p>\n<p><a href=\"https://tinkering.xyz/installing-nixos/\">https://tinkering.xyz/installing-nixos/</a></p>\n<p><a href=\"/user_uploads/60244/kw4y7Ts5scF7BuZF6eQV0O41/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/60244/kw4y7Ts5scF7BuZF6eQV0O41/image.png\" title=\"image.png\"><img src=\"/user_uploads/60244/kw4y7Ts5scF7BuZF6eQV0O41/image.png\"></a></div>",
        "id": 429642800,
        "sender_full_name": "Srid",
        "timestamp": 1711455730
    },
    {
        "content": "<p>3 messages were moved from this topic to <a class=\"stream-topic\" data-stream-id=\"413948\" href=\"/#narrow/stream/413948-nixos/topic/disko-install\">#nixos &gt; disko-install</a> by <span class=\"user-mention silent\" data-user-id=\"667408\">Srid</span>.</p>",
        "id": 429646633,
        "sender_full_name": "Notification Bot",
        "timestamp": 1711457122
    }
]